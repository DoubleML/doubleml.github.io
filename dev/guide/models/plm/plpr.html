
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>&lt;no title&gt; &#8212; DoubleML  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=c49bcd98" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=1ecd1175"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'guide/models/plm/plpr';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.doubleml.org/dev/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">DoubleML's first user survey is live: <a href='https://forms.gle/HjZsWgrF5UEFUyDX9'> Share your feedback here!</a> (10-15 minutes)</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../../../_static/logo_dark.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">DoubleML</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../intro/install.html">
     Install
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../intro/intro.html">
     Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../workflow/workflow.html">
     Workflow
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../guide.html">
     User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../examples/index.html">
     Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../api/api.html">
     Python API
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://docs.doubleml.org/r/stable/">
     R API
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://docs.doubleml.org/doubleml-coverage/">
     Coverage Repository
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../literature/literature.html">
     Literature
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../release/release.html">
     Release notes
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DoubleML/doubleml-for-py" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/DoubleML/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DoubleML/doubleml-for-py/discussions" title="Discussions" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discussions</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../intro/install.html">
     Install
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../intro/intro.html">
     Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../workflow/workflow.html">
     Workflow
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../guide.html">
     User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../examples/index.html">
     Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../api/api.html">
     Python API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://docs.doubleml.org/r/stable/">
     R API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://docs.doubleml.org/doubleml-coverage/">
     Coverage Repository
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../literature/literature.html">
     Literature
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../release/release.html">
     Release notes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DoubleML/doubleml-for-py" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/DoubleML/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DoubleML/doubleml-for-py/discussions" title="Discussions" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discussions</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><p class="logo" style="text-align:center;"><a href="../../../index.html">
    <img class="logo" src="../../../logo.png" alt="Logo" width="65%" height="65%">
</a></p>

<script type="text/javascript">
    // Change the logo depending on the theme
    var logo = document.querySelector('img.logo');
    var observer = new MutationObserver(function(mutations) {
        const dark = document.documentElement.dataset.theme == 'dark';
        if (dark) {
            logo.src = "../../../logo_dark.png";
        } else {
            logo.src = "../../../logo.png";
        }
    });
    observer.observe(document.documentElement, {attributes: true, attributeFilter: ['data-theme']});
</script></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">&lt;no title&gt;</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p>Suppose a panel study observes each of <span class="math notranslate nohighlight">\(N\)</span> individuals over <span class="math notranslate nohighlight">\(T\)</span> time periods (or waves).
For each individual <span class="math notranslate nohighlight">\(i=1,\dots,N\)</span> and each period <span class="math notranslate nohighlight">\(t=1,\dots,T\)</span>, the data consists of the
triple <span class="math notranslate nohighlight">\((Y_{it}, D_{it}, X_{it})\)</span>. Let <span class="math notranslate nohighlight">\(\{(Y_{it}, D_{it}, X_{it}) : t = 1, \dots , T\}_{i=1}^N\)</span>
denote <span class="math notranslate nohighlight">\(N\)</span> independent and identically distributed (iid) random vectors, where each vector
corresponds to individual <span class="math notranslate nohighlight">\(i\)</span> observed across all T waves.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The notation and identifying assumptions are based on <a class="reference external" href="https://doi.org/10.1093/ectj/utaf011">Clarke and Polselli (2025)</a>, with some small adjustments to better fit into the general package documentation conventions, sometimes slightly abusing notation.
See also the R package <a class="reference external" href="https://github.com/POLSEAN/XTDML">xtdml</a> implementation and corresponding reference <a class="reference external" href="https://arxiv.org/abs/2512.15965">Polselli (2025)</a> for further details.</p>
</div>
<p><strong>Partially linear panel regression (PLPR)</strong> models <a class="reference external" href="https://doi.org/10.1093/ectj/utaf011">(Clarke and Polselli, 2025)</a> take the form</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}Y_{it} = \theta_0 D_{it} + g_1(X_{it}) + \alpha_i^* + U_{it}, &amp; &amp;\mathbb{E}(U_{it} | D_{it}, X_{it}, \alpha_i^*) = 0,\\D_{it} = m_1(X_{it}) + \gamma_i + V_{it}, &amp; &amp;\mathbb{E}(V_{it} | X_{it}, \gamma_i) = 0,\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate nohighlight">\(Y_{it}\)</span> is the outcome variable and <span class="math notranslate nohighlight">\(D_{it}\)</span> is the policy variable of interest.
Further note that <span class="math notranslate nohighlight">\(\mathbb{E}[\alpha_i^* | D_{it}, X_{it}] \neq 0\)</span>. The high-dimensional
vector <span class="math notranslate nohighlight">\(X_{it} = (X_{it,1}, \ldots, X_{it,p})\)</span> consists of other confounding covariates.
<span class="math notranslate nohighlight">\(\alpha_i^*\)</span> and <span class="math notranslate nohighlight">\(\gamma_i\)</span> represent unobserved individual heterogeneity terms,
correlated with the covariates. <span class="math notranslate nohighlight">\(U_{it}\)</span> and <span class="math notranslate nohighlight">\(V_{it}\)</span> are stochastic errors.</p>
<p>Alternatively one can write the <em>partialling-out</em> PLPR model as</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}Y_{it} = \theta_0 V_{it} + \ell_1(X_{it}) + \alpha_i + U_{it},\\V_{it} = D_{it} - m_1(X_{it}) - \gamma_i,\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha_i\)</span> is a fixed effect.</p>
<p>To account for the presence of unobserved heterogeneity, <a class="reference external" href="https://doi.org/10.1093/ectj/utaf011">Clarke and Polselli (2025)</a>
use different panel data approaches, under the following assumptions.</p>
<p>Define potential outcomes <span class="math notranslate nohighlight">\(Y_{it}(d)\)</span> for individual <span class="math notranslate nohighlight">\(i\)</span> at wave <span class="math notranslate nohighlight">\(t\)</span>, where realizations are
linked to the observed outcome by the consistency assumption <span class="math notranslate nohighlight">\(Y_{it}(d_{it}) = Y_{it}\)</span>.</p>
<p><span class="math notranslate nohighlight">\(\xi_i\)</span> represent time-invariant heterogeneity terms influencing outcome and treatment.
Further, define <span class="math notranslate nohighlight">\(L_{t-1}(W_i) = \{W_{i1}, \dots, W_{it-1}\}\)</span> as lags of a random variable <span class="math notranslate nohighlight">\(W_{it}\)</span>
at wave <span class="math notranslate nohighlight">\(t\)</span>.</p>
<p>Assumptions <a class="reference external" href="https://doi.org/10.1093/ectj/utaf011">(Clarke and Polselli, 2025)</a>:</p>
<ul>
<li><dl class="simple">
<dt><strong>No feedback to predictors</strong></dt><dd><p><span class="math notranslate nohighlight">\(X_{it} \perp L_{t-1} (Y_i, D_i) | L_{t-1} (X_i), \xi_i\)</span></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Static panel</strong></dt><dd><p><span class="math notranslate nohighlight">\(Y_{it}, D_{it} \perp L_{t-1} (Y_i, X_i, D_i) | X_{it}, \xi_i\)</span></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Selection on observables and omitted time-invariant variables</strong></dt><dd><p><span class="math notranslate nohighlight">\(Y_{it} (.) \perp D_{it} | X_{it}, \xi_i\)</span></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Homogeneity and linearity of the treatment effect</strong></dt><dd><p><span class="math notranslate nohighlight">\(\mathbb{E} [Y_{it}(d) - Y_{it}(0) | X_{it}, \xi_i] = d \theta_0\)</span></p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>Additive Separability</strong></dt><dd><div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}&amp;\mathbb{E} [Y_{it}(0) | X_{it}, \xi_i] = g_1(X_{it}) + \alpha^*_i, &amp; &amp;\alpha^*_i = \alpha^*(\xi_i),\\&amp;\mathbb{E} [D_{it} | X_{it}, \xi_i] = m_1(X_{it}) + \gamma_i, &amp; &amp;\gamma_i = \gamma(\xi_i)\end{aligned}\end{align} \]</div>
</dd>
</dl>
</li>
</ul>
<p><strong>Correlated Random Effect (CRE) Approaches</strong></p>
<p>These approaches convert the fixed-effects model into a random-effects specification using the
Mundlak device <a class="reference external" href="https://doi.org/10.2307/1913646">(Mundlak, 1978)</a>.</p>
<p>Given the set of assumptions, the PLPR model under the CRE approaches take the form</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}Y_{it} = \theta_0 D_{it} + \tilde{g}_1 (X_{it}, \bar{X}_i) + a_i + U_{it},\\D_{it} = \tilde{m}_1(X_{it}, \bar{X}_i) + c_i + V_{it}.\end{aligned}\end{align} \]</div>
<p>For the <em>partialling-out</em> PLPR</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}Y_{it} = \theta_0 V_{it} + \tilde{\ell}_1(X_{it}, \bar{X}_i) + a_i + U_{it},\\V_{it} = D_{it} - \tilde{m}_1(X_{it}, \bar{X}_i) - c_i,\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate nohighlight">\(a_i\)</span>, <span class="math notranslate nohighlight">\(c_i\)</span> are random effects and covariate unit means
<span class="math notranslate nohighlight">\(\bar{X}_i = T^{-1} \sum_{t=1}^{T} X_{it}\)</span>.</p>
<p><strong>Transformation Approaches</strong></p>
<p>These approaches remove individual heterogeneity from the model by transforming the data.
For some random variable <span class="math notranslate nohighlight">\(W_{it}\)</span>, define the First-Difference (FD) transformation
<span class="math notranslate nohighlight">\(Q(W_{it}) = W_{it} - W_{it-1}\)</span> (for <span class="math notranslate nohighlight">\(t=2, \dots, T\)</span>), and the Within-Group (WG)
transformation <span class="math notranslate nohighlight">\(Q(W_{it}) = X_{it} - \bar{X}_{i}\)</span>, where <span class="math notranslate nohighlight">\(\bar{W}_{i} = T^{-1} \sum_{t=1}^T W_{it}\)</span>.</p>
<p>The PLPR model under the transformation approaches takes the form</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}Q(Y_{it}) = \theta_0 Q(D_{it}) + Q(g_1(X_{it})) + Q(U_{it}),\\Q(D_{it}) = Q(m_1(X_{it})) + Q(V_{it}).\end{aligned}\end{align} \]</div>
<p>For the <em>partialling-out</em> PLPR</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}Q(Y_{it}) = \theta_0 Q(V_{it}) + Q(\ell_1(X_{it})) + Q(U_{it}),\\Q(V_{it}) = Q(D_{it}) - Q(m_1(X_{it})).\end{aligned}\end{align} \]</div>
<p>These transformations remove the fixed effect terms, as <span class="math notranslate nohighlight">\(Q(\alpha_i^*)=Q(\alpha_i)=Q(\gamma_i)=0\)</span>.</p>
<p><strong>Implementation</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">DoubleMLPLPR</span></code> implements the estimation and requires <a class="reference internal" href="../../data_backend.html#dml-panel-data"><span class="std std-ref">DoubleMLPanelData</span></a> with parameter <code class="docutils literal notranslate"><span class="pre">static_panel=True</span></code> as input.
Unit identifier and time period columns are set with <code class="docutils literal notranslate"><span class="pre">id_col</span></code> and <code class="docutils literal notranslate"><span class="pre">t_col</span></code> in <a class="reference internal" href="../../data_backend.html#dml-panel-data"><span class="std std-ref">DoubleMLPanelData</span></a>.</p>
<p>The model described in <a class="reference external" href="https://doi.org/10.1093/ectj/utaf011">Clarke and Polselli (2025)</a> uses block-k-fold sample splitting, where the entire time series
of the sampled unit is allocated to one fold to allow for possible serial correlation within each unit, which is often the case for panel data. Furthermore,
cluster robust standard error are employed. <code class="docutils literal notranslate"><span class="pre">DoubleMLPLPR</span></code> implements both of these aspects by using <code class="docutils literal notranslate"><span class="pre">id_col</span></code> as the cluster variable internally, see the example notebook
<a class="reference external" href="https://docs.doubleml.org/stable/examples/py_double_ml_multiway_cluster.html">Python: Cluster Robust Double Machine Learning</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">DoubleMLPLPR</span></code> model inlcudes four different estimation approaches. The first two are correlated random effects (CRE) variants, the latter
two are transformation approaches. This can be selected with the <code class="docutils literal notranslate"><span class="pre">approach</span></code> parameter.</p>
<p><code class="docutils literal notranslate"><span class="pre">approach='cre_general'</span></code>:</p>
<ul>
<li><p>Learn <span class="math notranslate nohighlight">\(\tilde{\ell}_1 (X_{it}, \bar{X}_i)\)</span> from <span class="math notranslate nohighlight">\(\{ Y_{it}, X_{it}, \bar{X}_i : t=1,\dots, T \}_{i=1}^N\)</span>,</p></li>
<li><p>First learn <span class="math notranslate nohighlight">\(\tilde{m}_1(X_{it}, \bar{X}_i)\)</span> from <span class="math notranslate nohighlight">\(\{ D_{it}, X_{it}, \bar{X}_i : t=1,\dots, T \}_{i=1}^N\)</span>, with predictions <span class="math notranslate nohighlight">\(\hat{m}_{1,it} = \tilde{m}_1 (X_{it}, \bar{X}_i)\)</span></p>
<ul class="simple">
<li><p>Calculate <span class="math notranslate nohighlight">\(\hat{\bar{m}}_i = T^{-1} \sum_{t=1}^T \hat{m}_{1,it}\)</span>,</p></li>
<li><p>Calculate final nuisance part as <span class="math notranslate nohighlight">\(\hat{m}^*_1 (X_{it}, \bar{X}_i, \bar{D}_i) = \hat{m}_{1,it} + \bar{D}_i - \hat{\bar{m}}_i\)</span>,</p></li>
</ul>
<p>where <span class="math notranslate nohighlight">\(\hat{m}^*_1 (X_{it}, \bar{X}_i, \bar{D}_i) = \mathbb{E}[D_{it} | X_{it}, \bar{X}_i] + c_i\)</span>.</p>
</li>
<li><p><span class="math notranslate nohighlight">\(g_1\)</span> can be learnt iteratively from <span class="math notranslate nohighlight">\(\{ Y_{it}, X_{it}, \bar{X}_i : t=1,\dots, T \}_{i=1}^N\)</span> using estimates for <span class="math notranslate nohighlight">\(\tilde{\ell}_1, \tilde{m}_1\)</span>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">approach='cre_normal'</span></code></p>
<p>Under the assumption that the conditional distribution <span class="math notranslate nohighlight">\(D_{i1}, \dots, D_{iT} | X_{i1}, \dots X_{iT}\)</span> is multivariate normal (see <a class="reference external" href="https://doi.org/10.1093/ectj/utaf011">Clarke and Polselli (2025)</a> for further details):</p>
<ul class="simple">
<li><p>Learn <span class="math notranslate nohighlight">\(\tilde{\ell}_1 (X_{it}, \bar{X}_i)\)</span> from <span class="math notranslate nohighlight">\(\{ Y_{it}, X_{it}, \bar{X}_i : t=1,\dots, T \}_{i=1}^N\)</span>,</p></li>
<li><p>Learn <span class="math notranslate nohighlight">\(m^*_{1}\)</span> from <span class="math notranslate nohighlight">\(\{ D_{it}, X_{it}, \bar{X}_i, \bar{D}_i: t=1,\dots, T \}_{i=1}^N\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(g_1\)</span> can be learnt iteratively from <span class="math notranslate nohighlight">\(\{ Y_{it}, X_{it}, \bar{X}_i : t=1,\dots, T \}_{i=1}^N\)</span> using estimates for <span class="math notranslate nohighlight">\(\tilde{\ell}_1, \tilde{m}_1\)</span>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">approach='fd_exact'</span></code></p>
<p>Consider First-Difference (FD) transformation <span class="math notranslate nohighlight">\(Q(W_{it})= W_{it} - W_{it-1}\)</span>, under the assumptions from above,
<a class="reference external" href="https://doi.org/10.1093/ectj/utaf011">Clarke and Polselli (2025)</a> show that <span class="math notranslate nohighlight">\(\mathbb{E}[Y_{it}-Y_{it-1} | X_{it-1},X_{it}] =\Delta \ell_1 (X_{it-1}, X_{it})\)</span> and
<span class="math notranslate nohighlight">\(\mathbb{E}[D_{it}-D_{it-1} | X_{it-1},X_{it}] =\Delta m_1 (X_{it-1}, X_{it})\)</span>. Therefore, the transformed nuisance function can be learnt as</p>
<ul class="simple">
<li><p>Learn <span class="math notranslate nohighlight">\(\Delta \ell_1 (X_{it-1}, X_{it})\)</span> from <span class="math notranslate nohighlight">\(\{ Y_{it}-Y_{it-1}, X_{it-1}, X_{it} : t=2, \dots , T \}_{i=1}^N\)</span>,</p></li>
<li><p>Learn <span class="math notranslate nohighlight">\(\Delta m_1 (X_{it-1}, X_{it})\)</span> from <span class="math notranslate nohighlight">\(\{ D_{it}-D_{it-1}, X_{it-1}, X_{it} : t=2, \dots , T \}_{i=1}^N\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta g_1 (X_{it-1}, X_{it})\)</span> can be learnt iteratively from <span class="math notranslate nohighlight">\(\{ Y_{it}-Y_{it-1}, X_{it-1}, X_{it} : t=2, \dots , T \}_{i=1}^N\)</span> using estimates for <span class="math notranslate nohighlight">\(\Delta \ell_1, \Delta m_1\)</span>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">approach='wg_approx'</span></code></p>
<p>For the Within-Group (WG) transformation <span class="math notranslate nohighlight">\(Q(W_{it})= W_{it} - \bar{W}_{i}\)</span>, where <span class="math notranslate nohighlight">\(\bar{W}_{i} = T^{-1} \sum_{t=1}^T W_{it}\)</span>.
Approximating the model gives</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
Q(Y_{it}) &amp;\approx \theta_0 Q(D_{it}) + g_1 (Q(X_{it})) + Q(U_{it}), \\
Q(D_{it}) &amp;\approx m_1 (Q(X_{it})) + Q(V_{it}).
\end{align*}\end{split}\]</div>
<p>Similarly,</p>
<div class="math notranslate nohighlight">
\[Q(Y_{it}) \approx \theta_0 Q(V_{it}) + \ell_1 (Q(X_{it})) + Q(U_{it}).\]</div>
<ul class="simple">
<li><p>Learn <span class="math notranslate nohighlight">\(\ell_1\)</span> from transformed data <span class="math notranslate nohighlight">\(\{ Q(Y_{it}), Q(X_{it}) : t=1,\dots,T \}_{i=1}^N\)</span>,</p></li>
<li><p>Learn <span class="math notranslate nohighlight">\(m_1\)</span> from transformed data <span class="math notranslate nohighlight">\(\{ Q(D_{it}), Q(X_{it}) : t=1,\dots,T \}_{i=1}^N\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(g_1\)</span> can be learnt iteratively from <span class="math notranslate nohighlight">\(\{ Q(Y_{it}), Q(X_{it}) : t=1,\dots,T \}_{i=1}^N\)</span>, using estimates for <span class="math notranslate nohighlight">\(\ell_1, m_1\)</span>.</p></li>
</ul>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="simple visible nav section-nav flex-column">
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/DoubleML/doubleml-docs/edit/dev/doc/guide/models/plm/plpr.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/guide/models/plm/plpr.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2023, Bach, P., Chernozhukov, V., Klaassen, S., Kurz, M. S., and Spindler, M..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>