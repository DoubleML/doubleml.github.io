
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>DoubleML Workflow &#8212; DoubleML  documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'workflow/workflow';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API reference" href="../api/api.html" />
    <link rel="prev" title="9. Sample-splitting, cross-fitting and repeated cross-fitting" href="../guide/resampling.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">DoubleML  documentation</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                        DoubleML
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../intro/install.html">
                         Install
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../intro/intro.html">
                         Getting started
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../guide/guide.html">
                         User guide
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="#">
                         Workflow
                    </a>
                </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                    <a class="nav-link" href="../api/api.html">
                         Python API
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../https%3A//docs.doubleml.org/r/stable/.html">
                         R API
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../examples/index.html">
                         Examples
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../literature/literature.html">
                         Literature
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../release/release.html">
                         Release notes
                    </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/DoubleML/doubleml-for-py" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                        DoubleML
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../intro/install.html">
                         Install
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../intro/intro.html">
                         Getting started
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../guide/guide.html">
                         User guide
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="#">
                         Workflow
                    </a>
                </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                    <a class="nav-link" href="../api/api.html">
                         Python API
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../https%3A//docs.doubleml.org/r/stable/.html">
                         R API
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../examples/index.html">
                         Examples
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../literature/literature.html">
                         Literature
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../release/release.html">
                         Release notes
                    </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/DoubleML/doubleml-for-py" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><p class="logo" style="text-align:center;"><a href="../index.html">
    <img class="logo" src="../logo.png" alt="Logo" width="65%" height="65%">
</a></p>
    </div>
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><style>

.toc-entry {
  list-style: none;
  margin-left: 0em;
  min-height: 50px;
  border-left: 2px solid rgba(var(--pst-color-text-base), 1);
  padding: 0 0 50px 0px;
  position: relative;
}
.toc-entry:last-child{
  border-left: 0;
  left: 2px;
}

.toc-entry::after{
  border-left: 0;
  position: absolute;
  left: -8px;
  top: 0px;
  content: " ";
  border: 2px solid rgba(255, 255, 255, 1);
  border-radius: 500%;
  background: rgba(var(--pst-color-toc-link-active), 1);
  height: 15px;
  width: 15px;
}

.toc-entry:hover::after {
  background: rgba(var(--pst-color-link-hover), 1);
  transition: all 200ms ease-in-out;
}

.toc-entry > .nav-link {
  position: relative;
  font-size: small;
  font-weight: 600;
  text-align: left;
  margin: 0;
  top: -5px;
  color: rgba(var(--pst-color-text-base), 1);
}

.toc-entry > .nav-link.active {
  color: rgba(255, 255, 255, 1);
  font-size: medium;
  background-color: rgba(var(--pst-color-toc-link-active), 1);
  border-bottom-right-radius: 20px;
  border-top-right-radius: 20px;
  border-left: 0;
  margin-left: 2px;
  padding-right: 15px;
  top: -7px;
  transition: background-color 200ms ease-in-out, color 200ms ease-in-out, border 200ms ease-in-out, font-size 200ms ease-in-out;
}

</style>

    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="doubleml-workflow">
<h1>DoubleML Workflow<a class="headerlink" href="#doubleml-workflow" title="Permalink to this headline">#</a></h1>
<p>The following steps, which we call the DoubleML workflow, are intended to provide a rough structure for causal analyses
with <a class="reference internal" href="../index.html#doubleml-package"><span class="std std-ref">DoubleML</span></a>. After a short explanation of the idea of each step, we illustrate their meaning in the 401(k)
example. In case you are interested in more details of the 401(k) example, you can visit the
<a class="reference external" href="https://docs.doubleml.org/stable/examples/py_double_ml_pension.html">Python</a> and <a class="reference external" href="https://docs.doubleml.org/stable/examples/R_double_ml_pension.html">R</a>
Notebooks that are available online.</p>
<section id="problem-formulation">
<h2>0. Problem Formulation<a class="headerlink" href="#problem-formulation" title="Permalink to this headline">#</a></h2>
<p>The initial step of the DoubleML workflow is to formulate the causal problem at hand. Before we start our statistical
analysis, we have to explicitly state the conditions required for a causal interpretation of the estimator, which will
be computed later. In many cases, directed acyclical graphs (DAGs) are helpful to formulate the causal problem,
illustrate the involved causal channels and the critical parts of the inferential framework. At this stage, a precise
argumentation and discussion of the research question is crucial.</p>
<a class="reference internal image-reference" href="../_images/causal_graph.svg"><img alt="DAG for the 401(k) Example" class="align-center" src="../_images/causal_graph.svg" width="800" /></a>
<p>In the 401(k) study, we are interested in estimating the average treatment effect of participation in so-called 401(k) pension
plans on employees’ net financial assets. Because we cannot rely on a properly conducted randomized control study in this
example, we have to base our analysis on observational data. Hence, we have to use an identification strategy that is based
on appropriately controlling for potential confounders.
A complication that arises in the 401(k) example is due to so-called endogeneity of the treatment assignment. The treatment
variable is an employee’s participation in a 401(k) pension plan which is a decision made by employees and likely
to be affected by unobservable effects. For example, is seems reasonable that persons with higher income have stronger
preferences to save and also to participate in a pension plan. If our analysis does not account for this self-selection into
treatment, the estimated effect is likely to be biased.</p>
<p>To circumvent the endogenous treatment problem, it is possible to exploit randomness in eligibility for 401(k) plans.
In other words, the access to the treatment can be considered as randomly assigned once we control for confounding variables.
Earlier studies in this context argue that if characteristics that are related to saving preferences are taken into account,
eligibility can be considered as good as randomly assigned (at the time 401(k) plans were introduced).
The conditional exogeneity in the access to treatment makes it possible to estimate the causal effect of interest by using
an instrumental variable (IV) approach. However, for the sake of brevity, we will focus on the so-called intent-to-treat effect in the following.
This effect corresponds to the average treatment effect of eligibility (= the instrument) on net financial assets (= the outcome) and
is of great interest in many applications. The IV analysis is available in the <a class="reference external" href="https://docs.doubleml.org/stable/examples/py_double_ml_pension.html">Python</a>
and <a class="reference external" href="https://docs.doubleml.org/stable/examples/R_double_ml_pension.html">R</a> Notebooks that are available online.</p>
<p>The previous discussion focuses on the causal problem. Let’s also talk about the statistical methods used for estimation.
For identification of the average treatment effect of participation or eligibility on assets, it is crucial that we appropriately
account for the confounding factors. That’s where the machine learning tools come into play. Of course, we could simply estimate
the causal effect by using a classical linear (IV) regression model: The researcher has to manually pick and, perhaps,
transform the confounding variables in the regression model.
However, machine learning techniques offer greater flexibility in terms of a more data-driven specification
of the main regression equation and the first stage.</p>
</section>
<section id="data-backend">
<h2>1. Data-Backend<a class="headerlink" href="#data-backend" title="Permalink to this headline">#</a></h2>
<p>In step 1., we initialize the data-backend and thereby declare the role of the outcome, the treatment, and the confounding variables.</p>
<p>We use data from the 1991 Survey of Income and Program Participation which is available via the function
<a class="reference external" href="https://docs.doubleml.org/stable/api/generated/doubleml.datasets.fetch_401K.html">fetch_401K (Python)</a>
or <a class="reference external" href="https://docs.doubleml.org/r/stable/reference/fetch_401k.html">fetch_401k (R)</a>.
The data-backend can be initialized from various data frame objects in Python and R. To estimate the intent-to-treat effect in the
401(k) example, we use eligibility (<code class="docutils literal notranslate"><span class="pre">e401</span></code>) as the treatment variable of interest. The outcome variable is <code class="docutils literal notranslate"><span class="pre">net_tfa</span></code> and we
control for confounding variables <code class="docutils literal notranslate"><span class="pre">['age',</span> <span class="pre">'inc',</span> <span class="pre">'educ',</span> <span class="pre">'fsize',</span> <span class="pre">'marr',</span> <span class="pre">'twoearn',</span> <span class="pre">'db',</span> <span class="pre">'pira',</span> <span class="pre">'hown']</span></code>.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="3408bee6-a699-4934-9e4e-c6d3ee02d1b9" name="55ca9533-4a37-4c28-b511-53ae3e43951b" type="radio">
</input><label class="tabbed-label" for="3408bee6-a699-4934-9e4e-c6d3ee02d1b9">
Python</label><div class="tabbed-content docutils">
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">doubleml</span> <span class="kn">import</span> <span class="n">DoubleMLData</span>

<span class="gp">In [2]: </span><span class="kn">from</span> <span class="nn">doubleml.datasets</span> <span class="kn">import</span> <span class="n">fetch_401K</span>

<span class="gp">In [3]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">fetch_401K</span><span class="p">(</span><span class="n">return_type</span><span class="o">=</span><span class="s1">&#39;DataFrame&#39;</span><span class="p">)</span>

<span class="go"># Construct DoubleMLData object</span>
<span class="gp">In [4]: </span><span class="n">dml_data</span> <span class="o">=</span> <span class="n">DoubleMLData</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">y_col</span><span class="o">=</span><span class="s1">&#39;net_tfa&#39;</span><span class="p">,</span> <span class="n">d_cols</span><span class="o">=</span><span class="s1">&#39;e401&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                        <span class="n">x_cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;inc&#39;</span><span class="p">,</span> <span class="s1">&#39;educ&#39;</span><span class="p">,</span> <span class="s1">&#39;fsize&#39;</span><span class="p">,</span> <span class="s1">&#39;marr&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                                <span class="s1">&#39;twoearn&#39;</span><span class="p">,</span> <span class="s1">&#39;db&#39;</span><span class="p">,</span> <span class="s1">&#39;pira&#39;</span><span class="p">,</span> <span class="s1">&#39;hown&#39;</span><span class="p">])</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
</div>
<input id="cc0be265-15b1-403d-a856-c55d3bd81b9d" name="55ca9533-4a37-4c28-b511-53ae3e43951b" type="radio">
</input><label class="tabbed-label" for="cc0be265-15b1-403d-a856-c55d3bd81b9d">
R</label><div class="tabbed-content docutils">
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">DoubleML</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="nf">fetch_401k</span><span class="p">(</span><span class="n">return_type</span><span class="o">=</span><span class="s">&#39;data.table&#39;</span><span class="p">)</span>
<span class="c1"># Construct DoubleMLData object from data.table</span>
<span class="n">dml_data</span> <span class="o">=</span> <span class="n">DoubleMLData</span><span class="o">$</span><span class="nf">new</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">y_col</span><span class="o">=</span><span class="s">&#39;net_tfa&#39;</span><span class="p">,</span> <span class="n">d_cols</span><span class="o">=</span><span class="s">&#39;e401&#39;</span><span class="p">,</span>
                        <span class="n">x_cols</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="s">&#39;inc&#39;</span><span class="p">,</span> <span class="s">&#39;educ&#39;</span><span class="p">,</span> <span class="s">&#39;fsize&#39;</span><span class="p">,</span>
                                 <span class="s">&#39;marr&#39;</span><span class="p">,</span> <span class="s">&#39;twoearn&#39;</span><span class="p">,</span> <span class="s">&#39;db&#39;</span><span class="p">,</span> <span class="s">&#39;pira&#39;</span><span class="p">,</span>
                                 <span class="s">&#39;hown&#39;</span><span class="p">))</span>

<span class="n">data_frame</span> <span class="o">=</span> <span class="nf">fetch_401k</span><span class="p">(</span><span class="n">return_type</span><span class="o">=</span><span class="s">&#39;data.frame&#39;</span><span class="p">)</span>
<span class="c1"># Construct DoubleMLData object from data.frame</span>
<span class="n">dml_data_df</span> <span class="o">=</span> <span class="nf">double_ml_data_from_data_frame</span><span class="p">(</span><span class="n">data_frame</span><span class="p">,</span>
                                             <span class="n">y_col</span><span class="o">=</span><span class="s">&#39;net_tfa&#39;</span><span class="p">,</span>
                                             <span class="n">d_cols</span><span class="o">=</span><span class="s">&#39;e401&#39;</span><span class="p">,</span>
                                             <span class="n">x_cols</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="s">&#39;inc&#39;</span><span class="p">,</span>
                                                      <span class="s">&#39;educ&#39;</span><span class="p">,</span> <span class="s">&#39;fsize&#39;</span><span class="p">,</span>
                                                      <span class="s">&#39;marr&#39;</span><span class="p">,</span> <span class="s">&#39;twoearn&#39;</span><span class="p">,</span>
                                                      <span class="s">&#39;db&#39;</span><span class="p">,</span> <span class="s">&#39;pira&#39;</span><span class="p">,</span>
                                                      <span class="s">&#39;hown&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</div>
</div>
</section>
<section id="causal-model">
<h2>2. Causal Model<a class="headerlink" href="#causal-model" title="Permalink to this headline">#</a></h2>
<p>In Step 2. we choose a causal model. There are several models currently implemented in <a class="reference internal" href="../index.html#doubleml-package"><span class="std std-ref">DoubleML</span></a> which
differ in terms of the underlying causal structure (e.g., including IV variables or not) and the underlying assumptions.</p>
<a class="reference internal image-reference" href="../_images/doubleml_models.svg"><img alt="DoubleML Models" class="align-center" src="../_images/doubleml_models.svg" width="800" /></a>
<p>According to the previous discussion, we are interested in estimation of the effect of eligibility on net financial assets.
Hence, we do not need to use a model with both a treatment and instrumental variable. There are two potential models,
the <a class="reference internal" href="../guide/models.html#plr-model"><span class="std std-ref">partially linear regression model (PLR)</span></a> and the <a class="reference internal" href="../guide/models.html#irm-model"><span class="std std-ref">interactive regression model (IRM)</span></a>. These models differ
in terms of the type of the treatment variable (continuous vs. binary treatment) and the assumptions underlying the regression
equation. For example, the PLR assumes a partially linear structure, whereas the IRM allows treatment effects to be heterogeneous across
individuals. To keep the presentation short, we will choose a partially linear model.</p>
</section>
<section id="ml-methods">
<h2>3. ML Methods<a class="headerlink" href="#ml-methods" title="Permalink to this headline">#</a></h2>
<p>In Step 3. we can specify the machine learning tools used for estimation of the nuisance parts.
We can generally choose any learner from <a class="reference external" href="https://scikit-learn.org">scikit learn</a> in Python and from the <a class="reference external" href="https://mlr3.mlr-org.com">mlr3</a> ecosystem in R.</p>
<p>There are two nuisance parts in the PLR, <span class="math notranslate nohighlight">\(g_0(X)=\mathbb{E}(Y|X)\)</span> and  <span class="math notranslate nohighlight">\(m_0(X)=\mathbb{E}(D|X)\)</span>.
In this example, let us specify a random forest and an xgboost learner for both prediction problems.
We can directly pass the parameters during initialization of the learner objects.
Because we have a binary treatment variable, we can use a classification learner for the corresponding nuisance part.
We use a regression learner for the continuous outcome variable net financial assets.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="b2ce91f6-151f-476b-8277-bc876db5ad28" name="5d5eded5-51f5-4f11-9a53-4a3894d963ff" type="radio">
</input><label class="tabbed-label" for="b2ce91f6-151f-476b-8277-bc876db5ad28">
Python</label><div class="tabbed-content docutils">
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Random forest learners</span>
<span class="gp">In [5]: </span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">RandomForestRegressor</span>

<span class="gp">In [6]: </span><span class="n">ml_l_rf</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
<span class="gp">   ...: </span>                                <span class="n">max_features</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">min_samples_leaf</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="gp">In [7]: </span><span class="n">ml_m_rf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">n_estimators</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="gp">   ...: </span>                                <span class="n">max_features</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">min_samples_leaf</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="go"># Xgboost learners</span>
<span class="gp">In [8]: </span><span class="kn">from</span> <span class="nn">xgboost</span> <span class="kn">import</span> <span class="n">XGBClassifier</span><span class="p">,</span> <span class="n">XGBRegressor</span>

<span class="gp">In [9]: </span><span class="n">ml_l_xgb</span> <span class="o">=</span> <span class="n">XGBRegressor</span><span class="p">(</span><span class="n">objective</span> <span class="o">=</span> <span class="s2">&quot;reg:squarederror&quot;</span><span class="p">,</span> <span class="n">eta</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
<span class="gp">   ...: </span>                        <span class="n">n_estimators</span> <span class="o">=</span><span class="mi">35</span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="gp">In [10]: </span><span class="n">ml_m_xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">use_label_encoder</span> <span class="o">=</span> <span class="kc">False</span> <span class="p">,</span>
<span class="gp">   ....: </span>                        <span class="n">objective</span> <span class="o">=</span> <span class="s2">&quot;binary:logistic&quot;</span><span class="p">,</span>
<span class="gp">   ....: </span>                        <span class="n">eval_metric</span> <span class="o">=</span> <span class="s2">&quot;logloss&quot;</span><span class="p">,</span>
<span class="gp">   ....: </span>                        <span class="n">eta</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">n_estimators</span> <span class="o">=</span> <span class="mi">34</span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
</div>
<input id="94dedbad-6657-4138-9054-74accec06206" name="5d5eded5-51f5-4f11-9a53-4a3894d963ff" type="radio">
</input><label class="tabbed-label" for="94dedbad-6657-4138-9054-74accec06206">
R</label><div class="tabbed-content docutils">
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">mlr3</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">mlr3learners</span><span class="p">)</span>
<span class="c1"># Random forest learners</span>
<span class="n">ml_l_rf</span> <span class="o">=</span> <span class="nf">lrn</span><span class="p">(</span><span class="s">&quot;regr.ranger&quot;</span><span class="p">,</span> <span class="n">max.depth</span> <span class="o">=</span> <span class="m">7</span><span class="p">,</span>
            <span class="n">mtry</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">min.node.size</span> <span class="o">=</span><span class="m">3</span><span class="p">)</span>
<span class="n">ml_m_rf</span> <span class="o">=</span> <span class="nf">lrn</span><span class="p">(</span><span class="s">&quot;classif.ranger&quot;</span><span class="p">,</span> <span class="n">max.depth</span> <span class="o">=</span> <span class="m">5</span><span class="p">,</span>
            <span class="n">mtry</span> <span class="o">=</span> <span class="m">4</span><span class="p">,</span> <span class="n">min.node.size</span> <span class="o">=</span> <span class="m">7</span><span class="p">)</span>

<span class="c1"># Xgboost learners</span>
<span class="n">ml_l_xgb</span> <span class="o">=</span> <span class="nf">lrn</span><span class="p">(</span><span class="s">&quot;regr.xgboost&quot;</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="s">&quot;reg:squarederror&quot;</span><span class="p">,</span>
                <span class="n">eta</span> <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span> <span class="n">nrounds</span> <span class="o">=</span> <span class="m">35</span><span class="p">)</span>
<span class="n">ml_m_xgb</span> <span class="o">=</span> <span class="nf">lrn</span><span class="p">(</span><span class="s">&quot;classif.xgboost&quot;</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="s">&quot;binary:logistic&quot;</span><span class="p">,</span>
                <span class="n">eval_metric</span> <span class="o">=</span> <span class="s">&quot;logloss&quot;</span><span class="p">,</span>
                <span class="n">eta</span> <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span> <span class="n">nrounds</span> <span class="o">=</span> <span class="m">34</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</div>
</div>
</section>
<section id="dml-specifications">
<h2>4. DML Specifications<a class="headerlink" href="#dml-specifications" title="Permalink to this headline">#</a></h2>
<p>In Step 4., we initialize and parametrize the model object which will later be used to perform the estimation.</p>
<p>We initialize a <a class="reference external" href="https://docs.doubleml.org/stable/api/generated/doubleml.DoubleMLPLR.html">DoubleMLPLR (Python)</a> /
<a class="reference external" href="https://docs.doubleml.org/r/stable/reference/DoubleMLPLR.html">DoubleMLPLR (R)</a>
object using the previously generated data-backend. Moreover, we specify the resampling
(= the number of repetitions and folds for <a class="reference internal" href="../guide/resampling.html#repeated-cross-fitting"><span class="std std-ref">repeated cross-fitting</span></a>),
the dml algorithm (<a class="reference internal" href="../guide/algorithms.html#algorithms"><span class="std std-ref">DML1 vs. DML2</span></a>) and the score function (<a class="reference internal" href="../guide/scores.html#plr-score"><span class="std std-ref">“partialling out” or
“IV-type”</span></a>).</p>
<div class="tabbed-set docutils">
<input checked="checked" id="b6193a93-b9eb-4a57-b0cf-8ba8ae03023e" name="c6e94398-36ca-41b0-87e5-668cff5c6539" type="radio">
</input><label class="tabbed-label" for="b6193a93-b9eb-4a57-b0cf-8ba8ae03023e">
Python</label><div class="tabbed-content docutils">
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="kn">from</span> <span class="nn">doubleml</span> <span class="kn">import</span> <span class="n">DoubleMLPLR</span>

<span class="gp">In [12]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="go"># Default values</span>
<span class="gp">In [13]: </span><span class="n">dml_plr_tree</span> <span class="o">=</span> <span class="n">DoubleMLPLR</span><span class="p">(</span><span class="n">dml_data</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">ml_l</span> <span class="o">=</span> <span class="n">ml_l_rf</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">ml_m</span> <span class="o">=</span> <span class="n">ml_m_rf</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [14]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="go"># Parametrized by user</span>
<span class="gp">In [15]: </span><span class="n">dml_plr_tree</span> <span class="o">=</span> <span class="n">DoubleMLPLR</span><span class="p">(</span><span class="n">dml_data</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">ml_l</span> <span class="o">=</span> <span class="n">ml_l_rf</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">ml_m</span> <span class="o">=</span> <span class="n">ml_m_rf</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">n_folds</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">n_rep</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">score</span> <span class="o">=</span> <span class="s1">&#39;partialling out&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                            <span class="n">dml_procedure</span> <span class="o">=</span> <span class="s1">&#39;dml2&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
</div>
<input id="13c6dbcd-c3f5-4f6d-86a2-dc4d44c1d7ae" name="c6e94398-36ca-41b0-87e5-668cff5c6539" type="radio">
</input><label class="tabbed-label" for="13c6dbcd-c3f5-4f6d-86a2-dc4d44c1d7ae">
R</label><div class="tabbed-content docutils">
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">set.seed</span><span class="p">(</span><span class="m">123</span><span class="p">)</span>
<span class="c1"># Default values</span>
<span class="n">dml_plr_forest</span> <span class="o">=</span> <span class="n">DoubleMLPLR</span><span class="o">$</span><span class="nf">new</span><span class="p">(</span><span class="n">dml_data</span><span class="p">,</span>
                                <span class="n">ml_l</span> <span class="o">=</span> <span class="n">ml_l_rf</span><span class="p">,</span>
                                <span class="n">ml_m</span> <span class="o">=</span> <span class="n">ml_m_rf</span><span class="p">)</span>

<span class="nf">set.seed</span><span class="p">(</span><span class="m">123</span><span class="p">)</span>
<span class="c1"># Parametrized by user</span>
<span class="n">dml_plr_forest</span> <span class="o">=</span> <span class="n">DoubleMLPLR</span><span class="o">$</span><span class="nf">new</span><span class="p">(</span><span class="n">dml_data</span><span class="p">,</span>
                                <span class="n">ml_l</span> <span class="o">=</span> <span class="n">ml_l_rf</span><span class="p">,</span>
                                <span class="n">ml_m</span> <span class="o">=</span> <span class="n">ml_m_rf</span><span class="p">,</span>
                                <span class="n">n_folds</span> <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
                                <span class="n">score</span> <span class="o">=</span> <span class="s">&#39;partialling out&#39;</span><span class="p">,</span>
                                <span class="n">dml_procedure</span> <span class="o">=</span> <span class="s">&#39;dml2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</div>
</div>
</section>
<section id="estimation">
<h2>5. Estimation<a class="headerlink" href="#estimation" title="Permalink to this headline">#</a></h2>
<p>We perform estimation in Step 5. In this step, the cross-fitting algorithm is executed such that the predictions
in the score are computed. As an output, users can access the coefficient estimates and standard errors either via the
corresponding fields or via a summary.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="f3412ae4-c214-4f01-8ffe-e81da6f3d2b8" name="d64a39c6-0cb6-4f11-a9e4-33ad5c215dc5" type="radio">
</input><label class="tabbed-label" for="f3412ae4-c214-4f01-8ffe-e81da6f3d2b8">
Python</label><div class="tabbed-content docutils">
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Estimation</span>
<span class="gp">In [16]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="gh">Out[16]: </span><span class="go">&lt;doubleml.double_ml_plr.DoubleMLPLR at 0x7f3c704d7040&gt;</span>

<span class="go"># Coefficient estimate</span>
<span class="gp">In [17]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">coef</span>
<span class="gh">Out[17]: </span><span class="go">array([8909.63407762])</span>

<span class="go"># Standard error</span>
<span class="gp">In [18]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">se</span>
<span class="gh">Out[18]: </span><span class="go">array([1321.82228913])</span>

<span class="go"># Summary</span>
<span class="gp">In [19]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">summary</span>
<span class="gh">Out[19]: </span><span class="go"></span>
<span class="go">             coef      std err  ...        2.5 %        97.5 %</span>
<span class="go">e401  8909.634078  1321.822289  ...  6318.909997  11500.358158</span>

<span class="go">[1 rows x 6 columns]</span>
</pre></div>
</div>
</div>
<input id="6d3f1104-c148-4aee-abfd-4c2477940548" name="d64a39c6-0cb6-4f11-a9e4-33ad5c215dc5" type="radio">
</input><label class="tabbed-label" for="6d3f1104-c148-4aee-abfd-4c2477940548">
R</label><div class="tabbed-content docutils">
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Estimation</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="nf">fit</span><span class="p">()</span>

<span class="c1"># Coefficient estimate</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="n">coef</span>

<span class="c1"># Standard error</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="n">se</span>

<span class="c1"># Summary</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="nf">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>INFO  [14:33:21.430] [mlr3] Applying learner &#39;regr.ranger&#39; on task &#39;nuis_l&#39; (iter 1/3)
INFO  [14:33:23.744] [mlr3] Applying learner &#39;regr.ranger&#39; on task &#39;nuis_l&#39; (iter 2/3)
INFO  [14:33:25.025] [mlr3] Applying learner &#39;regr.ranger&#39; on task &#39;nuis_l&#39; (iter 3/3)
INFO  [14:33:26.383] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;nuis_m&#39; (iter 1/3)
INFO  [14:33:27.495] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;nuis_m&#39; (iter 2/3)
INFO  [14:33:28.583] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;nuis_m&#39; (iter 3/3)
</pre></div>
</div>
<div class="output text_html"><strong>e401:</strong> 9126.99864670889</div><div class="output text_html"><strong>e401:</strong> 1312.93958082416</div><div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Estimates and significance testing of the effect of target variables
     Estimate. Std. Error t value Pr(&gt;|t|)    
e401      9127       1313   6.952 3.61e-12 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1


</pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="inference">
<h2>6. Inference<a class="headerlink" href="#inference" title="Permalink to this headline">#</a></h2>
<p>In Step 6. we can perform further inference methods and finally interpret our findings. For example, we can set up confidence intervals
or, in case multiple causal parameters are estimated, adjust the analysis for multiple testing. <a class="reference internal" href="../index.html#doubleml-package"><span class="std std-ref">DoubleML</span></a>
supports various approaches to perform <a class="reference internal" href="../guide/sim_inf.html#sim-inf"><span class="std std-ref">valid simultaneous inference</span></a>
which are partly based on a multiplier bootstrap.</p>
<p>To conclude the analysis on the intent-to-treat effect in the 401(k) example, i.e., the average treatment effect of eligibility for 401(k) pension plans
on net financial assets, we find a positive and significant effect: Being eligible for such a pension plan increases the amount of net financial assets by
approximately <span class="math notranslate nohighlight">\($9,000\)</span>. This estimate is much smaller than the unconditional effect of eligibility on net financial assets:
If we did not control for the confounding variables, the average treatment effect would correspond to <span class="math notranslate nohighlight">\($19,559\)</span>.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="d4cce6bf-395d-4969-9a3e-a396a9335134" name="15490d8f-fad5-44c4-bb95-3ac3a95651ae" type="radio">
</input><label class="tabbed-label" for="d4cce6bf-395d-4969-9a3e-a396a9335134">
Python</label><div class="tabbed-content docutils">
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Summary</span>
<span class="gp">In [20]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">summary</span>
<span class="gh">Out[20]: </span><span class="go"></span>
<span class="go">             coef      std err  ...        2.5 %        97.5 %</span>
<span class="go">e401  8909.634078  1321.822289  ...  6318.909997  11500.358158</span>

<span class="go">[1 rows x 6 columns]</span>

<span class="go"># Confidence intervals</span>
<span class="gp">In [21]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">confint</span><span class="p">()</span>
<span class="gh">Out[21]: </span><span class="go"></span>
<span class="go">            2.5 %        97.5 %</span>
<span class="go">e401  6318.909997  11500.358158</span>

<span class="go"># Multiplier bootstrap (relevant in case with multiple treatment variables)</span>
<span class="gp">In [22]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">bootstrap</span><span class="p">()</span>
<span class="gh">Out[22]: </span><span class="go">&lt;doubleml.double_ml_plr.DoubleMLPLR at 0x7f3c704d7040&gt;</span>

<span class="go"># Simultaneous confidence bands</span>
<span class="gp">In [23]: </span><span class="n">dml_plr_tree</span><span class="o">.</span><span class="n">confint</span><span class="p">(</span><span class="n">joint</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[23]: </span><span class="go"></span>
<span class="go">            2.5 %        97.5 %</span>
<span class="go">e401  6075.923943  11743.344212</span>
</pre></div>
</div>
</div>
<input id="b2407914-3e0a-4b72-a82d-a3f4ce4e798a" name="15490d8f-fad5-44c4-bb95-3ac3a95651ae" type="radio">
</input><label class="tabbed-label" for="b2407914-3e0a-4b72-a82d-a3f4ce4e798a">
R</label><div class="tabbed-content docutils">
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Summary</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="nf">summary</span><span class="p">()</span>

<span class="c1"># Confidence intervals</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="nf">confint</span><span class="p">()</span>

<span class="c1"># Multiplier bootstrap (relevant in case with multiple treatment variables)</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="nf">bootstrap</span><span class="p">()</span>

<span class="c1"># Simultaneous confidence bands</span>
<span class="n">dml_plr_forest</span><span class="o">$</span><span class="nf">confint</span><span class="p">(</span><span class="n">joint</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Estimates and significance testing of the effect of target variables
     Estimate. Std. Error t value Pr(&gt;|t|)    
e401      9127       1313   6.952 3.61e-12 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1


</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A matrix: 1 × 2 of type dbl</caption>
<thead>
	<tr><th></th><th scope=col>2.5 %</th><th scope=col>97.5 %</th></tr>
</thead>
<tbody>
	<tr><th scope=row>e401</th><td>6553.684</td><td>11700.31</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A matrix: 1 × 2 of type dbl</caption>
<thead>
	<tr><th></th><th scope=col>2.5 %</th><th scope=col>97.5 %</th></tr>
</thead>
<tbody>
	<tr><th scope=row>e401</th><td>6553.428</td><td>11700.57</td></tr>
</tbody>
</table>
</div></div>
</div>
</div>
</div>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="../guide/resampling.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title"><span class="section-number">9. </span>Sample-splitting, cross-fitting and repeated cross-fitting</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="../api/api.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">API reference</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problem-formulation">
   0. Problem Formulation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-backend">
   1. Data-Backend
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#causal-model">
   2. Causal Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ml-methods">
   3. ML Methods
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dml-specifications">
   4. DML Specifications
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#estimation">
   5. Estimation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inference">
   6. Inference
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/workflow/workflow.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2021, Bach, P., Chernozhukov, V., Kurz, M. S., and Spindler, M..<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>