<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Double machine learning for interactive regression models — DoubleMLIRM • DoubleML</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Double machine learning for interactive regression models — DoubleMLIRM"><meta name="description" content="Double machine learning for interactive regression models."><meta property="og:description" content="Double machine learning for interactive regression models."><meta property="og:image" content="/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DoubleML</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="external-link nav-link" href="https://docs.doubleml.org/"><span class="fa fa-file-alt"></span> User Guide</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/getstarted.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/install.html">Install DoubleML</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction_to_DoubleML.html">Introduction to Double Machine Learning</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/DoubleML/doubleml-for-r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Double machine learning for interactive regression models</h1>
      <small class="dont-index">Source: <a href="https://github.com/DoubleML/doubleml-for-r/blob/1.0.2/R/double_ml_irm.R" class="external-link"><code>R/double_ml_irm.R</code></a></small>
      <div class="d-none name"><code>DoubleMLIRM.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Double machine learning for interactive regression models.</p>
    </div>


    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6::R6Class</a> object inheriting from <a href="DoubleML.html">DoubleML</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Interactive regression (IRM) models take the form</p>
<p>\(Y = g_0(D,X) + U\),</p>
<p>\(D = m_0(X) + V\),</p>
<p>with \(E[U|X,D]=0\) and \(E[V|X] = 0\). \(Y\) is the outcome variable
and \(D \in \{0,1\}\) is the binary treatment variable. We consider
estimation of the average treamtent effects when treatment effects are
fully heterogeneous. Target parameters of interest in this model are the
average treatment effect (ATE),</p>
<p>\(\theta_0 = E[g_0(1,X) - g_0(0,X)]\)</p>
<p>and the average treament effect on the treated (ATTE),</p>
<p>\(\theta_0 = E[g_0(1,X) - g_0(0,X)|D=1]\).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other DoubleML:
<code><a href="DoubleML.html">DoubleML</a></code>,
<code><a href="DoubleMLIIVM.html">DoubleMLIIVM</a></code>,
<code><a href="DoubleMLPLIV.html">DoubleMLPLIV</a></code>,
<code><a href="DoubleMLPLR.html">DoubleMLPLR</a></code>,
<code><a href="DoubleMLSSM.html">DoubleMLSSM</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="DoubleML.html">DoubleML::DoubleML</a></code> -&gt; <code>DoubleMLIRM</code></p>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>trimming_rule</code></dt>
<dd><p>(<code>character(1)</code>) <br>
A <code>character(1)</code> specifying the trimming approach.</p></dd>


<dt><code>trimming_threshold</code></dt>
<dd><p>(<code>numeric(1)</code>) <br>
The threshold used for timming.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-DoubleMLIRM-new"><code>DoubleMLIRM$new()</code></a></p></li>
<li><p><a href="#method-DoubleMLIRM-clone"><code>DoubleMLIRM$clone()</code></a></p></li>
</ul></div><p><details><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="bootstrap"><a href="DoubleML.html#method-bootstrap"><code>DoubleML::DoubleML$bootstrap()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="confint"><a href="DoubleML.html#method-confint"><code>DoubleML::DoubleML$confint()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="fit"><a href="DoubleML.html#method-fit"><code>DoubleML::DoubleML$fit()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="get_params"><a href="DoubleML.html#method-get_params"><code>DoubleML::DoubleML$get_params()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="learner_names"><a href="DoubleML.html#method-learner_names"><code>DoubleML::DoubleML$learner_names()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="p_adjust"><a href="DoubleML.html#method-p_adjust"><code>DoubleML::DoubleML$p_adjust()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="params_names"><a href="DoubleML.html#method-params_names"><code>DoubleML::DoubleML$params_names()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="print"><a href="DoubleML.html#method-print"><code>DoubleML::DoubleML$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="set_ml_nuisance_params"><a href="DoubleML.html#method-set_ml_nuisance_params"><code>DoubleML::DoubleML$set_ml_nuisance_params()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="set_sample_splitting"><a href="DoubleML.html#method-set_sample_splitting"><code>DoubleML::DoubleML$set_sample_splitting()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="split_samples"><a href="DoubleML.html#method-split_samples"><code>DoubleML::DoubleML$split_samples()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="summary"><a href="DoubleML.html#method-summary"><code>DoubleML::DoubleML$summary()</code></a></span></li>
<li><span class="pkg-link" data-pkg="DoubleML" data-topic="DoubleML" data-id="tune"><a href="DoubleML.html#method-tune"><code>DoubleML::DoubleML$tune()</code></a></span></li>
</ul></details></p><hr><a id="method-DoubleMLIRM-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Creates a new instance of this R6 class.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/DoubleMLIRM.html">DoubleMLIRM</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">ml_g</span>,</span>
<span>  <span class="va">ml_m</span>,</span>
<span>  n_folds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  n_rep <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  score <span class="op">=</span> <span class="st">"ATE"</span>,</span>
<span>  trimming_rule <span class="op">=</span> <span class="st">"truncate"</span>,</span>
<span>  trimming_threshold <span class="op">=</span> <span class="fl">1e-12</span>,</span>
<span>  dml_procedure <span class="op">=</span> <span class="st">"dml2"</span>,</span>
<span>  draw_sample_splitting <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  apply_cross_fitting <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>data</code></dt>
<dd><p>(<code>DoubleMLData</code>) <br>
The <code>DoubleMLData</code> object providing the data and specifying the variables
of the causal model.</p></dd>


<dt><code>ml_g</code></dt>
<dd><p>(<code><a href="https://mlr3.mlr-org.com/reference/LearnerRegr.html" class="external-link">LearnerRegr</a></code>,
<code><a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html" class="external-link">LearnerClassif</a></code>, <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code>,
<code>character(1)</code>) <br>
A learner of the class <code><a href="https://mlr3.mlr-org.com/reference/LearnerRegr.html" class="external-link">LearnerRegr</a></code>, which is
available from <a href="https://mlr3.mlr-org.com/index.html" class="external-link">mlr3</a> or its
extension packages <a href="https://mlr3learners.mlr-org.com/" class="external-link">mlr3learners</a> or
<a href="https://mlr3extralearners.mlr-org.com/" class="external-link">mlr3extralearners</a>.
For binary treatment outcomes, an object of the class
<code><a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html" class="external-link">LearnerClassif</a></code> can be passed, for example
<code>lrn("classif.cv_glmnet", s = "lambda.min")</code>.
Alternatively, a <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> object with public field
<code>task_type = "regr"</code> or <code>task_type = "classif"</code> can be passed,
respectively, for example of class
<code><a href="https://mlr3pipelines.mlr-org.com/reference/mlr_learners_graph.html" class="external-link">GraphLearner</a></code>. <br><code>ml_g</code> refers to the nuisance function \(g_0(X) = E[Y|X,D]\).</p></dd>


<dt><code>ml_m</code></dt>
<dd><p>(<code><a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html" class="external-link">LearnerClassif</a></code>,
<code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code>, <code>character(1)</code>) <br>
A learner of the class <code><a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html" class="external-link">LearnerClassif</a></code>, which is
available from <a href="https://mlr3.mlr-org.com/index.html" class="external-link">mlr3</a> or its
extension packages <a href="https://mlr3learners.mlr-org.com/" class="external-link">mlr3learners</a> or
<a href="https://mlr3extralearners.mlr-org.com/" class="external-link">mlr3extralearners</a>.
Alternatively, a <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> object with public field
<code>task_type = "classif"</code> can be passed, for example of class
<code><a href="https://mlr3pipelines.mlr-org.com/reference/mlr_learners_graph.html" class="external-link">GraphLearner</a></code>. The learner can possibly
be passed with specified parameters, for example
<code>lrn("classif.cv_glmnet", s = "lambda.min")</code>. <br><code>ml_m</code> refers to the nuisance function \(m_0(X) = E[D|X]\).</p></dd>


<dt><code>n_folds</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of folds. Default is <code>5</code>.</p></dd>


<dt><code>n_rep</code></dt>
<dd><p>(<code>integer(1)</code>) <br>
Number of repetitions for the sample splitting. Default is <code>1</code>.</p></dd>


<dt><code>score</code></dt>
<dd><p>(<code>character(1)</code>, <code>function()</code>) <br>
A <code>character(1)</code> (<code>"ATE"</code> or <code>ATTE</code>) or a <code>function()</code> specifying the
score function. If a <code>function()</code>
is provided, it must be of the form
<code>function(y, d, g0_hat, g1_hat, m_hat, smpls)</code> and the returned output
must be a named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> with elements <code>psi_a</code> and <code>psi_b</code>.
Default is <code>"ATE"</code>.</p></dd>


<dt><code>trimming_rule</code></dt>
<dd><p>(<code>character(1)</code>) <br>
A <code>character(1)</code> (<code>"truncate"</code> is the only choice) specifying the
trimming approach. Default is <code>"truncate"</code>.</p></dd>


<dt><code>trimming_threshold</code></dt>
<dd><p>(<code>numeric(1)</code>) <br>
The threshold used for timming. Default is <code>1e-12</code>.</p></dd>


<dt><code>dml_procedure</code></dt>
<dd><p>(<code>character(1)</code>) <br>
A <code>character(1)</code> (<code>"dml1"</code> or <code>"dml2"</code>) specifying the double machine
learning algorithm. Default is <code>"dml2"</code>.</p></dd>


<dt><code>draw_sample_splitting</code></dt>
<dd><p>(<code>logical(1)</code>) <br>
Indicates whether the sample splitting should be drawn during
initialization of the object. Default is <code>TRUE</code>.</p></dd>


<dt><code>apply_cross_fitting</code></dt>
<dd><p>(<code>logical(1)</code>) <br>
Indicates whether cross-fitting should be applied. Default is <code>TRUE</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-DoubleMLIRM-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DoubleMLIRM</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.doubleml.org/stable/index.html" class="external-link">DoubleML</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3.mlr-org.com" class="external-link">mlr3</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3learners.mlr-org.com" class="external-link">mlr3learners</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ml_g</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"regr.ranger"</span>,</span></span>
<span class="r-in"><span>  num.trees <span class="op">=</span> <span class="fl">100</span>, mtry <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  min.node.size <span class="op">=</span> <span class="fl">2</span>, max.depth <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ml_m</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"classif.ranger"</span>,</span></span>
<span class="r-in"><span>  num.trees <span class="op">=</span> <span class="fl">100</span>, mtry <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  min.node.size <span class="op">=</span> <span class="fl">2</span>, max.depth <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obj_dml_data</span> <span class="op">=</span> <span class="fu"><a href="make_irm_data.html">make_irm_data</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dml_irm_obj</span> <span class="op">=</span> <span class="va">DoubleMLIRM</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">obj_dml_data</span>, <span class="va">ml_g</span>, <span class="va">ml_m</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dml_irm_obj</span><span class="op">$</span><span class="fu">fit</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dml_irm_obj</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimates and significance testing of the effect of target variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Estimate. Std. Error t value Pr(&gt;|t|)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d    0.6658     0.2866   2.323   0.0202 *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.doubleml.org/stable/index.html" class="external-link">DoubleML</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3.mlr-org.com" class="external-link">mlr3</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3learners.mlr-org.com" class="external-link">mlr3learners</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3tuning.mlr-org.com" class="external-link">mlr3tuning</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ml_g</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"regr.rpart"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ml_m</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obj_dml_data</span> <span class="op">=</span> <span class="fu"><a href="make_irm_data.html">make_irm_data</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dml_irm_obj</span> <span class="op">=</span> <span class="va">DoubleMLIRM</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">obj_dml_data</span>, <span class="va">ml_g</span>, <span class="va">ml_m</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">param_grid</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"ml_g"</span> <span class="op">=</span> <span class="fu">paradox</span><span class="fu">::</span><span class="fu"><a href="https://paradox.mlr-org.com/reference/ps.html" class="external-link">ps</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    cp <span class="op">=</span> <span class="fu">paradox</span><span class="fu">::</span><span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_dbl</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="fl">0.01</span>, upper <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    minsplit <span class="op">=</span> <span class="fu">paradox</span><span class="fu">::</span><span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_int</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="fl">1</span>, upper <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"ml_m"</span> <span class="op">=</span> <span class="fu">paradox</span><span class="fu">::</span><span class="fu"><a href="https://paradox.mlr-org.com/reference/ps.html" class="external-link">ps</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    cp <span class="op">=</span> <span class="fu">paradox</span><span class="fu">::</span><span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_dbl</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="fl">0.01</span>, upper <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    minsplit <span class="op">=</span> <span class="fu">paradox</span><span class="fu">::</span><span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_int</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="fl">1</span>, upper <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># minimum requirements for tune_settings</span></span></span>
<span class="r-in"><span><span class="va">tune_settings</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  terminator <span class="op">=</span> <span class="fu">mlr3tuning</span><span class="fu">::</span><span class="fu"><a href="https://bbotk.mlr-org.com/reference/trm.html" class="external-link">trm</a></span><span class="op">(</span><span class="st">"evals"</span>, n_evals <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  algorithm <span class="op">=</span> <span class="fu">mlr3tuning</span><span class="fu">::</span><span class="fu"><a href="https://mlr3tuning.mlr-org.com/reference/tnr.html" class="external-link">tnr</a></span><span class="op">(</span><span class="st">"grid_search"</span>, resolution <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dml_irm_obj</span><span class="op">$</span><span class="fu">tune</span><span class="op">(</span>param_set <span class="op">=</span> <span class="va">param_grid</span>, tune_settings <span class="op">=</span> <span class="va">tune_settings</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dml_irm_obj</span><span class="op">$</span><span class="fu">fit</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dml_irm_obj</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Philipp Bach, Victor Chernozhukov, Malte S. Kurz, Martin Spindler, Klaassen Sven.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

